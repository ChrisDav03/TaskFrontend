@page
@model TaskFrontend.Pages.TasksModel
@{
    Layout = "_Layout";
}

<h1>Lista de Tareas</h1>

@if (Model.Tareas.Any())
{
    <ul>
        @foreach (var tarea in Model.Tareas)
        {
            <li>
                <strong>@tarea.Title</strong>: @tarea.Description <br />
                Estado: @(tarea.Status == 0 ? "Pendiente" : "Completada") <br />
                Asignado a: @(tarea.UserAssigned.Id != null ? tarea.UserAssigned.Id : "Nadie") <br />
                Creado: @tarea.CreatedAt.ToString("yyyy-MM-dd HH:mm:ss") <br />
                Actualizado: @tarea.UpdatedAt.ToString("yyyy-MM-dd HH:mm:ss") <br />
                <form method="post" asp-page-handler="Update">
                    <input type="hidden" name="Id" value="@tarea.Id" />
                    <button type="submit">Editar</button>
                </form>
                <form method="post" asp-page-handler="Delete">
                    <input type="hidden" name="Id" value="@tarea.Id" />
                    <button type="submit">Eliminar</button>
                </form>
            </li>
        }
    </ul>
}
else
{
    <p>No hay tareas disponibles.</p>
}

<h2>Crear Nueva Tarea</h2>
<form method="post" asp-page-handler="Create">
    <div>
        <label for="Title">Título:</label>
        <input type="text" id="Title" name="Title" required />
    </div>
    <div>
        <label for="Description">Descripción:</label>
        <input type="text" id="Description" name="Description" required />
    </div>
    <div>
        <label for="Status">Estado:</label>
        <select id="Status" name="Status">
            <option value="0">Pendiente</option>
            <option value="1">Completada</option>
        </select>
    </div>
    <div>
        <label for="UserAssignedId">Asignar a usuario (ID):</label>
        <input type="number" id="UserAssignedId" name="UserAssignedId" />
    </div>
    <button type="submit">Crear</button>
</form>
